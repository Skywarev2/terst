{# MASTER PRODUCT TEMPLATE - V7 (Redesign based on "BO7 Zenith" example) #}
{% set imgScaleClass = ('object-scale-down' if global.properties.product_image_fit == 'scale-down' else 'object-cover') %}
<section class="component product-wrapper-v6" data-component-id="product-page">
  <div class="container py-5">
    <div class="xph-card-v6">
      <div class="xph-grid-v6" x-data="productForm">
        <div class="xph-left-v6">
          <div class="xph-hero-v6">
            {% if product.image_urls|length > 0 %}<img src="{{ product.image_urls[0] }}" alt="{{ product.name }}">
            {% elif product.image_url %}<img src="{{ product.image_url }}" alt="{{ product.name }}">
            {% else %}<div class="xph-image-placeholder-v6"><svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" viewBox="0 0 16 16"><path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464z"/></svg></div>
            {% endif %}
          </div>
        </div>
        <div class="xph-right-v6">
          <h1 class="xph-title-v6">{{ product.name }}</h1>
          {% if 'views' in liveStats or 'sales' in liveStats %}<div class="xph-meta-row-v6"><div class="x-live-chips-v6">{% if 'views' in liveStats %}<span class="chip-v6"><i class="dot-v6" style="--c:#10d98d"></i><strong>{{ liveStats.views }}</strong><span class="label-v6">viewing</span></span>{% endif %}{% if 'sales' in liveStats %}<span class="chip-v6"><svg viewBox="0 0 24 24" width="14" height="14" aria-hidden="true"><path fill="currentColor" d="M7 18a2 2 0 1 1 0 4 2 2 0 0 1 0-4Zm10 0a2 2 0 1 1 0 3.999A2 2 0 0 1 17 18ZM3 4h2l3.6 7.59-1.35 2.45A2 2 0 0 0 7 16h10a2 2 0 0 0 1.79-1.11L21 8H7"></path></svg><strong>{{ liveStats.sales }}</strong><span class="label-v6">purchased</span></span>{% endif %}</div></div>{% endif %}
          <div class="xph-price-v6" x-text="appCurrency.format(totalPrice, '{{ product.currency }}')"></div>
          <form @submit.prevent="buyNow">
            {% if product.variants.length > 1 %}<div class="my-4"><div class="xph-sub-v6">SELECT A VARIANT</div><div class="variant-selector-v6">{% for variant in product.variants %}<button type="button" @click="activeVariant = {{ loop.index0 }}" :class="activeVariant == {{ loop.index0 }} ? 'active' : ''" {{ 'disabled' if variant.stock === 0 }}><span class="name">{{ variant.name }}</span><span class="price" x-text="appCurrency.format({{ variant.price }}, '{{ product.currency }}')"></span></button>{% endfor %}</div></div>{% endif %}
            <div class="my-4"><label for="quantity" class="xph-sub-v6">QUANTITY</label><div class="quantity-input-v6"><button @click="changeQuantity(quantity - 1)" type="button" :disabled="outOfStock || quantity <= minQuantity">-</button><input type="number" name="quantity" x-model.number="quantity" :disabled="outOfStock"><button @click="changeQuantity(quantity + 1)" type="button" :disabled="outOfStock || quantity >= maxQuantity">+</button></div></div>
            <div class="buy-buttons-v6">{% if not properties.hide_add_to_cart %}<button type="button" x-on:click="addToCart" class="btn-add-to-cart-v6" :disabled="outOfStock || addingToCart"><span x-show="!addingToCart && !addedToCart">Add to Cart</span><span x-show="addingToCart">Adding...</span><span x-show="addedToCart">Go to Cart</span></button>{% endif %}{% if not properties.hide_buy_now %}<button type="submit" class="btn-buy-now-v6" :disabled="outOfStock || buyingNow"><span x-show="!buyingNow">Buy Now</span><span x-show="buyingNow">Processing...</span></button>{% endif %}</div>
          </form>
        </div>
      </div>
    </div>
    <div class="xph-desc-card-v6"><div class="xph-desc-head-v6"><span class="pill-v6">Description</span></div><div class="xph-desc-body-v6 editor">{{ product.description | safe }}</div></div>
  </div>
</section>
<style>.product-wrapper-v6{color:#fff;background-color:#12121F}.xph-card-v6{background:#1B1B2C;border-radius:.75rem;padding:2rem;border:1px solid rgba(255,255,255,.07)}.xph-grid-v6{display:grid;grid-template-columns:1fr;gap:2rem}@media (min-width:992px){.xph-grid-v6{grid-template-columns:minmax(0,1.5fr) minmax(0,1fr);gap:3rem}}.xph-hero-v6{border-radius:.5rem;overflow:hidden;aspect-ratio:16/9;background-color:#12121F}.xph-hero-v6 img{width:100%;height:100%;object-fit:cover}.xph-image-placeholder-v6{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,.1)}.xph-right-v6{display:flex;flex-direction:column}.xph-title-v6{font-size:2rem;font-weight:700;margin-bottom:.75rem;line-height:1.2}.xph-meta-row-v6{display:flex;align-items:center;margin-bottom:1.5rem}.x-live-chips-v6{display:flex;gap:.5rem}.chip-v6{display:flex;align-items:center;gap:.35rem;background:#2A2A40;padding:.25rem .6rem;border-radius:.25rem;font-size:.75rem}.chip-v6 .dot-v6{width:8px;height:8px;border-radius:50%;background-color:var(--c)}.chip-v6 strong{font-weight:600}.chip-v6 .label-v6{color:rgba(255,255,255,.6)}.xph-price-v6{font-size:2rem;font-weight:700;margin-bottom:.25rem}.xph-sub-v6{font-size:.7rem;font-weight:600;color:rgba(255,255,255,.4);letter-spacing:.05em;text-transform:uppercase;margin-bottom:.75rem}.variant-selector-v6{display:flex;flex-direction:column;gap:.5rem}.variant-selector-v6 button{width:100%;display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;background:#2A2A40;border-radius:.5rem;border:1px solid transparent;text-align:left;color:#fff;transition:all .2s ease}.variant-selector-v6 button:not(:disabled):hover{background:#363652}.variant-selector-v6 button.active{background:#363652;border-color:#5865F2}.variant-selector-v6 button:disabled{opacity:.5;cursor:not-allowed}.variant-selector-v6 .name{font-weight:600}.variant-selector-v6 .price{font-weight:500;color:rgba(255,255,255,.7)}.quantity-input-v6{display:flex;border:1px solid #2A2A40;border-radius:.375rem;overflow:hidden;background:#2A2A40}.quantity-input-v6 input{width:100%;background:transparent;color:#fff;text-align:center;border:none;padding:.5rem;font-size:1rem}.quantity-input-v6 input:focus{outline:none}.quantity-input-v6 button{width:40px;background:transparent;border:none;color:#fff;font-size:1.25rem;transition:background-color .2s ease}.quantity-input-v6 button:not(:disabled):hover{background-color:#363652}.quantity-input-v6 button:disabled{opacity:.4;cursor:not-allowed}.buy-buttons-v6{display:flex;align-items:center;gap:1rem;margin-top:1.5rem}.buy-buttons-v6 button{padding:.75rem 1rem;border-radius:.375rem;font-size:1rem;font-weight:600;border:none;transition:all .2s ease}.btn-add-to-cart-v6{flex-grow:1;background-color:#E53935;color:#fff}.btn-add-to-cart-v6:not(:disabled):hover{background-color:#C62828}.btn-buy-now-v6{background-color:transparent;color:#fff}.btn-buy-now-v6:not(:disabled):hover{background-color:#2A2A40}.buy-buttons-v6 button:disabled{opacity:.6;cursor:not-allowed}.xph-desc-card-v6{margin-top:1.5rem;background:#1B1B2C;border-radius:.75rem;border:1px solid rgba(255,255,255,.07)}.xph-desc-head-v6{padding:.75rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.07)}.pill-v6{background:#E53935;padding:.25rem .75rem;border-radius:99px;font-size:.8rem;font-weight:600}.xph-desc-body-v6{padding:1.5rem;color:rgba(255,255,255,.7);line-height:1.7}
</style>
<script>
document.addEventListener('alpine:init',()=>{Alpine.data('productForm',()=>({product:{{product|json}},activeVariant:0,quantity:1,addingToCart:!1,addedToCart:!1,buyingNow:!1,buyNowError:null,init(){const t=this.product.variants.findIndex(t=>0!==t.stock);this.activeVariant=t>=0?t:0,this.quantity=this.variant.quantity_min||1,this.$watch('activeVariant',()=>{this.quantity=this.variant.quantity_min||1,this.addedToCart=!1})},get variant(){return this.product.variants[this.activeVariant]},get outOfStock(){return this.variant&&0===this.variant.stock},get minQuantity(){return this.variant.quantity_min||1},get maxQuantity(){return this.variant.quantity_max||999},get totalPrice(){return(this.variant.price*this.quantity).toFixed(2)},changeQuantity(t){this.quantity=Math.max(this.minQuantity,Math.min(t,this.maxQuantity))},addToCart(){this.addedToCart?window.location.href='{{'/cart'|shopUrl}}':(this.addingToCart=!0,this.appCart.add(this.product.id,this.variant.id,this.quantity),setTimeout(()=>{this.addedToCart=!0,this.addingToCart=!1},1e3))},async buyNow(){this.buyingNow=!0,this.buyNowError=null,console.log('Buying now:',{productId:this.product.id,variantId:this.variant.id,quantity:this.quantity}),setTimeout(()=>{this.buyingNow=!1},2e3)}}))});
</script>