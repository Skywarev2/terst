<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- 🚫 Noscript + Early DevTools Block -->
    <noscript>
      <meta http-equiv="refresh" content="0;url=https://google.com">
      <style>body { display: none !important; }</style>
    </noscript>
    {% raw %}
    <script>
      (() => {
        const before = new Date().getTime();
        debugger;
        const after = new Date().getTime();
        if (after - before > 100) {
          document.write(`
            <style>body{background:#0e111a;color:#fff;font-family:sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;text-align:center}</style>
            <h1>🚫 SkyWare Security<br><small>DevTools Detected Too Early</small></h1>
          `);
          document.close();
        }
      })();
    </script>
    {% endraw %}

    {% render_snippet "meta-tags.njk" %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />
    <link href="{{ 'built.css' | assetUrl }}" rel="stylesheet" />
    <link href="{{ 'custom.css' | assetUrl }}" rel="stylesheet" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link 
      href="https://fonts.googleapis.com/css2?family={{ (global.properties.font | default('Poppins')) | replace(' ', '+') }}:wght@300;400;500;600;700&display=swap" 
      rel="stylesheet"
    >
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/choices.js@10.2.0/public/assets/styles/choices.min.css" rel="stylesheet" crossorigin="anonymous" />



  <body>
    <!-- Aurora Hintergrund -->
    <div class="aurora-bg">
      <div class="aurora-blob blue"></div>
      <div class="aurora-blob purple"></div>
      <div class="aurora-blob pink"></div>
      <div class="aurora-blob green"></div>
      <div class="aurora-soft-glow"></div>
    </div>

    <div class="flex-wrapper" id="app" x-data="app">
      <div>
        <header class="sticky-top">
          {% render_component "announcement" %}
          {% render_component "navbar" %}
        </header>
        {{ templateContent | safe }}

        <!-- Vouches Container -->
        <section class="my-5">
          <div id="vouchesContainer"></div>
        </section>
      </div>

      {% render_component "footer" %}
      {% render_snippet "customer-login-modal.njk" %}
    </div>

    <!-- Info Toast -->
    <div id="info-popup" class="info-popup" role="alert">
      <div class="info-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 2l1.5 4.5L18 7l-3.5 3L15 15l-3-2-3 2 1-5L6 7l4.5-.5L12 2z"/>
        </svg>
      </div>
      <div class="info-content">
        <div class="info-title">Limited-time offer!</div>
        <div class="info-message">Cheapest prices for Cheats.<br>Code: <span class="promo-code">SKY5</span></div>
      </div>
      <button class="info-close" aria-label="Close">×</button>
    </div>

    <!-- Scripts -->
    <script>
      window.shopId = {{ shop.id | json | default('null') }};
      window.apiBaseUrl = "";
      window.currencyRatesUsd = {{ currency_rates_usd | json | default('{}') }};
      window.defaultCurrency = {{ currency | json | default('"USD"') }};
      window.shopCustomer = {{ shop_customer | json | default('null') }};
    </script>

    {% if isBuilder %}{% render_snippet "script-builder.njk" %}{% endif %}
    
    {% if altcha or altcha_shop_customer %}
      <script type="module">import altcha from 'https://cdn.jsdelivr.net/npm/altcha@1.2.0/+esm'</script>
    {% elif shop.recaptcha_key %}
      <script src="https://www.google.com/recaptcha/api.js?render={{ shop.recaptcha_key }}"></script>
    {% endif %}

    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js@10.2.0/public/assets/scripts/choices.min.js" crossorigin="anonymous"></script>
    <script src="{{ 'script.js' | assetUrl }}" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.3/dist/cdn.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js" crossorigin="anonymous"></script>

    {% if global.properties.snow %}
      <div id="snow"></div>
      {% raw %}
      <script>snow({ count: 200 });</script>
      {% endraw %}
    {% endif %}

    <!-- Show Info Toast -->
    {% raw %}
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const popup = document.getElementById('info-popup');
        const closeBtn = document.querySelector('.info-close');
        if (!popup) return;
        setTimeout(() => {
          popup.classList.add('show');
          setTimeout(() => {
            popup.classList.remove('show');
            setTimeout(() => popup.style.display = 'none', 400);
          }, 5000);
        }, 1500);
        closeBtn?.addEventListener('click', () => {
          popup.classList.remove('show');
          setTimeout(() => popup.style.display = 'none', 400);
        });
      });
    </script>
    {% endraw %}

    {% render_snippet "script-integrations.njk" %}

    <!-- 🔐 Anti-Inspect + Fake ViewSource -->
    {% raw %}
    <script>
      function showGuardToast() {
        if (document.getElementById('guard-toast')) return;
        const t = document.createElement('div');
        t.id = 'guard-toast';
        t.textContent = '🔒 Protected by SkyWare';
        Object.assign(t.style, {
          position: 'fixed', bottom: '20px', left: '50%', transform: 'translateX(-50%)',
          background: '#141824e6', color: '#e5e7eb', padding: '10px 18px',
          borderRadius: '8px', border: '1px solid #2c2f40', boxShadow: '0 4px 20px rgba(0,0,0,.35)',
          fontSize: '.88rem', fontFamily: 'Inter,sans-serif', zIndex: '2000',
          opacity: '0', transition: 'opacity .3s ease', backdropFilter: 'blur(6px)'
        });
        document.body.appendChild(t); requestAnimationFrame(() => t.style.opacity = '1');
        setTimeout(() => { t.style.opacity = '0'; setTimeout(() => t.remove(), 400); }, 2200);
      }
      document.addEventListener('contextmenu', e => { e.preventDefault(); showGuardToast(); });
      document.addEventListener('keydown', e => {
        const k = e.key.toUpperCase();
        const bad = k === 'F12' || (e.ctrlKey && e.shiftKey && ['I','J','C'].includes(k)) || (e.ctrlKey && ['U','S'].includes(k));
        if (bad) {
          e.preventDefault(); showGuardToast();
          if (e.ctrlKey && k === 'U') {
            const win = window.open('', '_blank');
            if (win) {
              win.document.write(`<!DOCTYPE html><html><head><title>Source</title><style>body{margin:0;display:flex;align-items:center;justify-content:center;height:100vh;background:#0e111a;color:#6c00ff;font-family:sans-serif}h1{font-size:clamp(1.6rem,5vw,3rem);text-align:center}</style></head><body><h1>🚫 SkyWare<br>Source Code Locked</h1></body></html>`);
              win.document.close();
            }
          }
        }
      });
      ['dragstart', 'selectstart'].forEach(ev => document.addEventListener(ev, e => { e.preventDefault(); showGuardToast(); }));
      document.addEventListener('touchstart', e => { if (e.touches.length > 1) { e.preventDefault(); showGuardToast(); } }, { passive: false });
    </script>
    {% endraw %}
    <style>*{-webkit-user-select:none;-webkit-touch-callout:none;-webkit-user-drag:none;user-select:none}</style>
  </body>
</html>